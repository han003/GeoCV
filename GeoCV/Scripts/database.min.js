function refreshTable(){$("#edit-elem-load").removeClass("hidden");$("table").addClass("hidden");var n=$("#filter-txt").val();$.ajax({url:"/Database/FilterElements",data:{Filter:n},type:"GET",success:function(n){console.log(n);var t="";$.each(n,function(n,i){var r=i.ListeKatalogId,u=i.Element,f=i.Katalog;t+='<tr id="'+r+'"><td>'+u+"<\/td><td>"+f+'<\/td><td><a class="del-link">Slett<\/a><\/td><\/tr>'});$("tbody").html(t);$("#edit-elem-load").addClass("hidden");$("table").removeClass("hidden")}})}function changeElement(){var n=$("#editModal").data("elementId"),t=$("#edit-txt").val(),i=$("#"+n);console.log("Ny tekst: "+t+"("+n+")");$.ajax({url:"/Database/ChangeElement",data:{Id:n,NewValue:t},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){console.log("Changed");i.children("td:first").html(t);$("#editModal").modal("hide")}})}$(document).ready(function(){refreshTable()});$("#filter-txt").keyup(function(){refreshTable()});$(document).on("click",".del-link",function(){console.log("Deleting..");var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=$(this).closest("td");i.html('Sletter <i class="fa fa-spinner fa-pulse"><\/i>');console.log("Id: "+n);$.ajax({url:"/Database/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click","tr",function(){var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=t.children("td:first").html();console.log(n);$("#edit-txt").val(i);$("#editModal").data("elementId",n);$("#edit-txt").removeClass("hidden");$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).on("click","#add-item-btn",function(){var n=$("#new-item-txt").val(),t=$("#katalog-select option:selected").attr("id");console.log('Legg til "'+n+'" i katalogen "'+t+'"');$.ajax({url:"/Database/AddElement",data:{NyttElement:n,Katalog:t},type:"POST",beforeSend:function(){$("#new-element-row").addClass("hidden");$("#new-element-loading").removeClass("hidden")},success:function(){console.log("Lagt til");refreshTable();$("#new-item-txt").val("");$("#new-element-row").removeClass("hidden");$("#new-element-loading").addClass("hidden")}})});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="27"&&$("#editModal").is(":visible")&&$("#editModal").modal("hide")});
//# sourceMappingURL=database.min.js.map
