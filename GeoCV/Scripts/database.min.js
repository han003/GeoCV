function filter(){$("#database-tabell tbody").children("tr").removeClass("filter");var t=$("#filter-txt").val().toLowerCase(),n=0;$('label > input[type="checkbox"]:checked').each(function(t,i){var r=$(i),f=r.parent("label"),u=r.data("katalog");$("#database-tabell tbody tr").each(function(){$(this).data("katalog").indexOf(u)>=0&&$(this).addClass("filter")});n++});n==0&&$("#database-tabell tbody").children("tr").addClass("filter");$("#database-tabell tbody tr").each(function(){var n=$(this).data("element").toLowerCase();n.indexOf(t)>=0&&$(this).hasClass("filter")?$(this).removeClass("hidden"):$(this).addClass("hidden")})}function addNewItem(){var n=$("#new-item-txt").val(),t=$("#katalog-select option:selected").attr("id");console.log('Legg til "'+n+'" i katalogen "'+t+'"');$.ajax({url:"/Database/AddElement",data:{NyttElement:n,Katalog:t},type:"POST",beforeSend:function(){$("#new-element-row").addClass("hidden");$("#new-element-loading").removeClass("hidden")},success:function(i){console.log("Lagt til");var r='<tr id="'+i+'" data-katalog="'+t+'" data-element="'+n+'"><td class="element-td col-lg-5" data-id="'+i+'" data-element="'+n+'">'+n+'<\/td><td class="katalog-td col-lg-5">'+t+'<\/td><td><a data-id="'+i+'" class="del-link col-lg-2">Slett<\/a><\/td><\/tr>';$("#database-tabell tbody").append(r);$("#new-item-txt").val("");$("#new-element-row").removeClass("hidden");$("#new-element-loading").addClass("hidden");$("#new-item-txt").focus()}})}function changeElement(){var t=$("#editModal").data("elementId"),n=$("#edit-txt").val(),i=$("#"+t),r=i.children("td:first");console.log("Ny tekst: "+n+"("+t+")");$.ajax({url:"/Database/ChangeElement",data:{Id:t,NewValue:n},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){console.log("Changed");i.children("td:first").html(n);i.children("td:first").data("element",n);r.updateSortVal(n);$("#editModal").modal("hide")}})}$(document).ready(function(){$("#database-tabell").stupidtable();$("#database-tabell").bind("aftertablesort",function(n,t){var i=t.column,r=t.direction;$.each($("#database-tabell th i"),function(n){n==i?($(this).removeClass("hidden"),$(this).removeClass("fa-sort-desc"),$(this).removeClass("fa-sort-asc"),r=="asc"?$(this).addClass("fa-sort-asc"):$(this).addClass("fa-sort-desc")):$(this).addClass("hidden")})})});$("button").click(function(){$(this).blur()});$("#filter-txt").keyup(function(){filter()});$("label > input[type=checkbox]").on("change",function(){filter()});$(document).on("click",".del-link",function(){var n=$(this).data("id"),t=$(this).closest("tr");$(this).closest("td").html('Sletter <i class="fa fa-spinner fa-spin"><\/i>');console.log("Id: "+n);$.ajax({url:"/Database/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".element-td",function(){var n=$(this).data("id"),t=$(this).data("element");console.log(n);$("#edit-txt").val(t);$("#editModal").data("elementId",n);$("#edit-txt").removeClass("hidden");$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).on("click","#add-item-btn",function(){addNewItem()});$("#new-item-txt").keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&addNewItem()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});
//# sourceMappingURL=database.min.js.map
