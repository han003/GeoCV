function filter(){$("#database-tabell tbody").children("tr").removeClass("filter");var t=$("#filter-txt").val().toLowerCase(),n=0;$('label > input[type="checkbox"]:checked').each(function(t,i){var r=$(i),f=r.parent("label"),u=r.attr("id").substring(0,r.attr("id").indexOf("-"));$("#database-tabell tbody tr").each(function(){var n=$(this).children("td").next().html();n.indexOf(u)>=0&&$(this).addClass("filter")});n++});n==0&&$("#database-tabell tbody").children("tr").addClass("filter");$("#database-tabell tbody tr").each(function(){var n=$(this).children("td").html().toLowerCase(),i=$(this).children("td").next().html().toLowerCase();n.indexOf(t)>=0&&$(this).hasClass("filter")?$(this).removeClass("hidden"):$(this).addClass("hidden")})}function refreshTable(){$("#edit-elem-load").removeClass("hidden");$("table").addClass("hidden");$.ajax({url:"/Database/GetDatabase",type:"GET",success:function(n){console.log(n);var t="";$.each(n,function(n,i){var r=i.ListeKatalogId,u=i.Element,f=i.Katalog;t+='<tr id="'+r+'"><td class="element-td col-lg-5">'+u+'<\/td><td class="katalog-td col-lg-5">'+f+'<\/td><td><a class="del-link col-lg-2">Slett<\/a><\/td><\/tr>'});$("tbody").html(t);$("#edit-elem-load").addClass("hidden");$("table").removeClass("hidden")}})}function addNewItem(){var n=$("#new-item-txt").val(),t=$("#katalog-select option:selected").attr("id");console.log('Legg til "'+n+'" i katalogen "'+t+'"');$.ajax({url:"/Database/AddElement",data:{NyttElement:n,Katalog:t},type:"POST",beforeSend:function(){$("#new-element-row").addClass("hidden");$("#new-element-loading").removeClass("hidden")},success:function(){console.log("Lagt til");refreshTable();$("#new-item-txt").val("");$("#new-element-row").removeClass("hidden");$("#new-element-loading").addClass("hidden");$("#new-item-txt").focus()}})}function changeElement(){var n=$("#editModal").data("elementId"),t=$("#edit-txt").val(),i=$("#"+n);console.log("Ny tekst: "+t+"("+n+")");$.ajax({url:"/Database/ChangeElement",data:{Id:n,NewValue:t},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){console.log("Changed");i.children("td:first").html(t);$("#editModal").modal("hide")}})}$(document).ready(function(){$("#database-tabell").stupidtable();$("#database-tabell").bind("aftertablesort",function(n,t){var i=t.column,r=t.direction;$.each($("#database-tabell th i"),function(n){console.log(n);n==i?($(this).removeClass("hidden"),$(this).removeClass("fa-sort-desc"),$(this).removeClass("fa-sort-asc"),r=="asc"?$(this).addClass("fa-sort-asc"):$(this).addClass("fa-sort-desc")):$(this).addClass("hidden")})});refreshTable()});$("button").click(function(){$(this).blur()});$("#filter-txt").keyup(function(){filter()});$("label > input[type=checkbox]").on("change",function(){filter()});$(document).on("click",".del-link",function(){console.log("Deleting..");var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=$(this).closest("td");i.html('Sletter <i class="fa fa-spinner fa-spin"><\/i>');console.log("Id: "+n);$.ajax({url:"/Database/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".element-td",function(){var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=t.children("td:first").html();console.log(n);$("#edit-txt").val(i);$("#editModal").data("elementId",n);$("#edit-txt").removeClass("hidden");$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).on("click","#add-item-btn",function(){addNewItem()});$("#new-item-txt").keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&addNewItem()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});
//# sourceMappingURL=database.min.js.map
