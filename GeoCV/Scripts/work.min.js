function changeElement(){var t=$("#editModal").data("elementId"),i=$("#editModal").data("dbKolonne"),n="",r;n=i=="Fra"||i=="Til"?$("#modal-select").val():$("#edit-txt").val();r=$("#"+t);console.log("Ny tekst: "+n+"("+t+")");$.ajax({url:"/Work/ChangeElement",data:{Id:t,NewValue:n,Kolonne:i},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#modal-select").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){var i=$("#editModal").data("tdIndex"),t=r.children("td:nth-child("+(i+1)+")");t.html(n);t.updateSortVal(n);$("#editModal").modal("hide")}})}$(document).ready(function(){$("#work-table").stupidtable();$("#work-table").bind("aftertablesort",function(n,t){var i=t.column,r=t.direction;$.each($("#work-table th i"),function(n){n==i?($(this).removeClass("hidden"),$(this).removeClass("fa-sort-desc"),$(this).removeClass("fa-sort-asc"),r=="asc"?$(this).addClass("fa-sort-asc"):$(this).addClass("fa-sort-desc")):$(this).addClass("hidden")})})});$("#work-add-btn").click(function(){$(this).blur();var i=$("#text-work-place").val(),n=$("#select-work-role").val(),r=$("#text-work-description").val(),u=$("#work-select-from").val(),f=$("#work-select-to").val(),t=$("#nåværende-radio-btn label.active input").val()==="true";console.log(n);$.ajax({url:"/Work/AddNewWork",data:{Arbeidsplass:i,Stilling:n,Beskrivelse:r,"Nåværende":t,Fra:u,Til:f},type:"POST",beforeSend:function(){$("#work-add-btn").html('Legger til ny arbeidserfaring <i class="fa fa-spinner fa-spin"><\/i>')},success:function(e){$("#text-work-place, #text-work-role, #text-work-description").val("");$("#nåværende-radio-btn label:first").addClass("active");$("#nåværende-radio-btn label:last").removeClass("active");$("#work-select-to").closest(".form-group").removeClass("hidden");$("#work-select-from").val($("#work-select-from option:first").val());$("#work-select-to").val($("#work-select-to option:first").val());$("#work-add-btn").html("Legg til arbeidserfaring");console.log(e);var o='<tr id="'+e+'"><td data-id="'+e+'" data-stilling="'+n+'" data-kolonne="Arbeidsplass" data-verdi="'+i+'" class="update-td col-lg-2">'+i+'<\/td><td data-id="'+e+'" data-stilling="'+n+'" data-kolonne="Stilling" data-verdi="'+n+'" class="update-td col-lg-2">'+n+'<\/td><td data-id="'+e+'" data-stilling="'+n+'" data-kolonne="Beskrivelse" data-verdi="'+r+'" class="update-td col-lg-2">'+r+'<\/td><td data-id="'+e+'" data-stilling="'+n+'" data-kolonne="Fra" data-verdi="'+u+'" class="update-td col-lg-2">'+u+'<\/td><td data-id="'+e+'" data-stilling="'+n+'" data-kolonne="Til" data-verdi="'+(t?"Nåværende":f)+'" class="update-td col-lg-2">'+(t?"Nåværende":f)+'<\/td><td><a data-id="'+e+'" class="del-link col-lg-2">Slett<\/a><\/td><\/tr>';$('tbody td:contains("Nåværende")').html((new Date).getFullYear());t?$("tbody").prepend(o):$("tbody").append(o)}})});$(document).on("click",".del-link",function(){var n=$(this).data("id"),t=$(this).closest("tr"),i=$(this).closest("td");console.log("Id: "+n);$.ajax({url:"/Work/DeleteElement",data:{Id:n},type:"POST",beforeSend:function(){i.html('Sletter <i class="fa fa-spinner fa-spin"><\/i>')},success:function(){t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".update-td",function(){$("#edit-txt, #modal-select, #nåværendeTekst, #editLoader").addClass("hidden");$("#editmodalAddItem").removeClass("hidden");var r=$(this).index(),i=$(this).data("id"),t=$(this).data("verdi"),u=$(this).data("stilling"),n=$(this).data("kolonne");console.log(i+" - "+t+" - "+n);$("#myModalLabel").html("Rediger "+n.toLowerCase());$("#editModal").data("elementId",i);$("#editModal").data("dbKolonne",n);$("#editModal").data("tdIndex",r);t==="Nåværende"?($("#nåværendeTekst").removeClass("hidden").html("<strong>"+u+"<\/strong> er satt som din nåværende stilling og dato kan ikke endres.<br />Vennligst legg til en ny stilling som nåværende for å endre."),$("#editmodalAddItem").addClass("hidden")):n=="Fra"||n=="Til"?($("#modal-select").removeClass("hidden"),$("#modal-select").val(t)):(n!="Fra"||n!="Til")&&($("#edit-txt").removeClass("hidden"),$("#edit-txt").val(t));$("#editModal").modal()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});$(document).on("change",'input:radio[id^="ja"]',function(){$("#work-select-to").closest(".form-group").addClass("hidden")});$(document).on("change",'input:radio[id^="nei"]',function(){$("#work-select-to").closest(".form-group").removeClass("hidden")});
//# sourceMappingURL=work.min.js.map
