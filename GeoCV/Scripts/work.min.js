function refreshTable(){$("table").addClass("hidden");$("#elem-load").removeClass("hidden");$.ajax({url:"/Work/GetArbeidserfaring",type:"GET",success:function(n){console.log(n);$.each(n,function(n,t){var u=t.ArbeidserfaringId,f=t.Arbeidsplass,e=t.Stilling,i=t["Nåværende"],o=t.Beskrivelse,s=t.Fra,h=i?"Nåværende":t.Til,r='<tr id="'+u+'"><td class="update-td col-lg-2">'+f+'<\/td><td class="update-td col-lg-2">'+e+'<\/td><td class="update-td col-lg-4">'+o+'<\/td><td class="update-td col-lg-1">'+s+'<\/td><td class="update-td col-lg-1">'+h+'<\/td><td><a class="del-link col-lg-2">Slett<\/a><\/td><\/tr>';i?$("tbody").prepend(r):$("tbody").append(r)});$("#elem-load").addClass("hidden");$("table").removeClass("hidden")}})}function changeElement(){var t=$("#editModal").data("elementId"),i=$("#editModal").data("dbKolonne"),n="",r;n=i=="Fra"||i=="Til"?$("#modal-select").val():$("#edit-txt").val();r=$("#"+t);console.log("Ny tekst: "+n+"("+t+")");$.ajax({url:"/Work/ChangeElement",data:{Id:t,NewValue:n,Kolonne:i},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#modal-select").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){var t=$("#editModal").data("tdIndex");r.children("td:nth-child("+(t+1)+")").html(n);$("#editModal").modal("hide")}})}$(document).ready(function(){refreshTable()});$("#work-add-btn").click(function(){$(this).blur();var n=$("#text-work-place").val(),t=$("#text-work-role").val(),i=$("#text-work-description").val(),r=$("#work-select-from").val(),u=$("#work-select-to").val(),f=$("#nåværende-radio-btn label.active input").val()==="true";$.ajax({url:"/Work/AddNewWork",data:{Arbeidsplass:n,Stilling:t,Beskrivelse:i,"Nåværende":f,Fra:r,Til:u},type:"POST",beforeSend:function(){$("#work-add-btn").html('Legger til ny arbeidserfaring <i class="fa fa-circle-o-notch fa-spin"><\/i>')},success:function(){$("#text-work-place").val("");$("#text-work-role").val("");$("#text-work-description").val("");$("#nåværende-radio-btn label:first").addClass("active");$("#nåværende-radio-btn label:last").removeClass("active");$("#work-select-to").closest(".form-group").removeClass("hidden");$("#work-select-from").val($("#work-select-from option:first").val());$("#work-select-to").val($("#work-select-to option:first").val());$("#work-add-btn").html("Legg til arbeidserfaring");refreshTable()}})});$(document).on("click",".del-link",function(){console.log("Deleting..");var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=$(this).closest("td");i.html('Sletter <i class="fa fa-circle-o-notch fa-spin"><\/i>');console.log("Id: "+n);$.ajax({url:"/Work/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".update-td",function(){$("#edit-txt").addClass("hidden");$("#modal-select").addClass("hidden");$("#nåværendeTekst").addClass("hidden");$("#editmodalAddItem").removeClass("hidden");var t=$(this),r=t.index(),f=t.closest("tr"),u=f.attr("id"),i=t.html(),e=t.parent().children("td").first().html(),n=$("#work-table").find("th").eq(r).html();console.log(u+" - "+i+" - "+n);$("#myModalLabel").html("Rediger "+n.toLowerCase());$("#editModal").data("elementId",u);$("#editModal").data("dbKolonne",n);$("#editModal").data("tdIndex",r);i==="Nåværende"?($("#nåværendeTekst").removeClass("hidden").html("<strong>"+e+"<\/strong> er satt som din nåværende stilling og dato kan ikke endres.<br />Vennligst legg til en ny stilling som nåværende for å endre."),$("#editmodalAddItem").addClass("hidden")):n=="Fra"||n=="Til"?($("#modal-select").removeClass("hidden"),$("#modal-select").val(i)):(n!="Fra"||n!="Til")&&($("#edit-txt").removeClass("hidden"),$("#edit-txt").val(i));$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});$(document).on("change",'input:radio[id^="ja"]',function(){$("#work-select-to").closest(".form-group").addClass("hidden")});$(document).on("change",'input:radio[id^="nei"]',function(){$("#work-select-to").closest(".form-group").removeClass("hidden")});
//# sourceMappingURL=work.min.js.map
