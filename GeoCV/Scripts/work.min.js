function refreshTable(){$("table").addClass("hidden");$("#elem-load").removeClass("hidden");$.ajax({url:"/Work/GetArbeidserfaring",type:"GET",success:function(n){console.log(n);var t="";$.each(n,function(n,i){var r=i.ArbeidserfaringId,u=i.Arbeidsplass,f=i.Stilling,e=i.Beskrivelse,o=i.Fra,s=i.Til;t+='<tr id="'+r+'"><td class="update-td col-lg-2">'+u+'<\/td><td class="update-td col-lg-2">'+f+'<\/td><td class="update-td col-lg-4">'+e+'<\/td><td class="update-td col-lg-1">'+o+'<\/td><td class="update-td col-lg-1">'+s+'<\/td><td><a class="del-link col-lg-2">Slett<\/a><\/td><\/tr>'});$("tbody").html(t);$("#elem-load").addClass("hidden");$("table").removeClass("hidden")}})}function changeElement(){var t=$("#editModal").data("elementId"),i=$("#editModal").data("dbKolonne"),n="",r;n=i=="Fra"||i=="Til"?$("#modal-select").val():$("#edit-txt").val();r=$("#"+t);console.log("Ny tekst: "+n+"("+t+")");$.ajax({url:"/Work/ChangeElement",data:{Id:t,NewValue:n,Kolonne:i},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#modal-select").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){var t=$("#editModal").data("tdIndex");r.children("td:nth-child("+(t+1)+")").html(n);$("#editModal").modal("hide")}})}$(document).ready(function(){refreshTable()});$("#work-add-btn").click(function(){var n=$("#text-work-place").val(),t=$("#text-work-role").val(),i=$("#text-work-description").val(),r=$("#work-select-from").val(),u=$("#work-select-to").val();$.ajax({url:"/Work/AddNewWork",data:{Arbeidsplass:n,Stilling:t,Beskrivelse:i,Fra:r,Til:u},type:"POST",beforeSend:function(){$("#work-add-btn").html('<i class="fa fa-spinner fa-pulse"><\/i>')},success:function(){$("#text-work-place").val("");$("#text-work-role").val("");$("#text-work-description").val("");$("#work-select-from").val($("#work-select-from option:first").val());$("#work-select-to").val($("#work-select-to option:first").val());$("#work-add-btn").html("Legg til arbeidserfaring");refreshTable()}})});$(document).on("click",".del-link",function(){console.log("Deleting..");var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=$(this).closest("td");i.html('Sletter <i class="fa fa-spinner fa-pulse"><\/i>');console.log("Id: "+n);$.ajax({url:"/Work/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".update-td",function(){var t=$(this),r=t.index(),f=t.closest("tr"),u=f.attr("id"),i=t.html(),n=$("#work-table").find("th").eq(r).html();console.log(u+" - "+i+" - "+n);$("#myModalLabel").html("Rediger "+n.toLowerCase());$("#editModal").data("elementId",u);$("#editModal").data("dbKolonne",n);$("#editModal").data("tdIndex",r);n=="Fra"||n=="Til"?($("#edit-txt").addClass("hidden"),$("#modal-select").removeClass("hidden"),$("#modal-select").val(i)):($("#modal-select").addClass("hidden"),$("#edit-txt").removeClass("hidden"),$("#edit-txt").val(i));$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});
//# sourceMappingURL=work.min.js.map
