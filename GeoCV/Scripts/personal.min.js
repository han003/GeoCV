function update(n){var i=n.attr("id").substring(0,n.attr("id").indexOf("-")),t=n.val();console.log("Ny verdi: "+t);$("#shadowBrukerLink").html("Surfer som "+$("#Fornavn-txt").val()+" "+$("#Etternavn-txt").val());$.post("/Personal/Update",{Update:i,Value:t})}function getLanguages(){$.get("/Personal/GetLanguages",function(n){console.log(n);var t=[],i=[];$.each(n[1],function(r,u){t.push(u.Element);i.push(u.ListeKatalogId);try{$.each(n[0][0].split(";"),function(n,t){u.ListeKatalogId==t&&$("#Språk-group").append('<button id="språk-'+u.ListeKatalogId+'" type="button" class="btn btn-info added-btn" tabindex="-1">'+u.Element+"<\/button>")})}catch(f){console.log(f)}});$(function(){$("#Språk-auto").typeahead({minLength:0,source:t})});$("#Språk-load").addClass("hidden");$("#Språk-form").removeClass("hidden");$("#Språk-auto").data("element",t);$("#Språk-auto").data("elementId",i)},"json")}function createDate(n){var t=n.split(" ")[0].split(".")[0],i=n.split(" ")[0].split(".")[1]-1,r=n.split(" ")[0].split(".")[2];return new Date(r,i,t)}function addItem(n){databaseUpdateColumn=n.attr("id");databaseUpdateColumn=databaseUpdateColumn.substring(0,databaseUpdateColumn.indexOf("-"));isDuplicate()&&(autoTextfield=$("#"+databaseUpdateColumn+"-auto"),appendNewLanguage(autoTextfield.val()),updateDatabase());$("#"+databaseUpdateColumn+"-auto").val("")}function appendNewLanguage(n){var t=autoTextfield.data("element"),i=autoTextfield.data("elementId");$.each(t,function(t,r){n==r&&$("#"+databaseUpdateColumn+"-group").append('<button id="språk-'+i[t]+'" type="button" class="btn btn-info added-btn" tabindex="-1">'+r+"<\/button>")})}function updateDatabase(){var n="";$("#"+databaseUpdateColumn+"-group button").each(function(){var t=$(this).attr("id"),i=t.substring(t.indexOf("-")+1);n+=i+";"});n=n.substring(0,n.length-1);console.log("Table: "+databaseUpdateColumn);console.log("Value: "+n);$.post("/Personal/Update",{Update:databaseUpdateColumn,Value:n})}function isDuplicate(){var n=!1,t="",i="";$("#"+databaseUpdateColumn+"-group button").each(function(){var n=$(this).attr("id"),i=n.substring(n.indexOf("-")+1);t+=i+";"});autoTextfield=$("#"+databaseUpdateColumn+"-auto");var r=autoTextfield.val(),u=autoTextfield.data("element"),f=autoTextfield.data("elementId");return $.each(u,function(n,t){r==t&&(i=f[n])}),t.indexOf(i)==-1&&(n=!0),n}$(document).ready(function(){getLanguages()});$.datepicker.setDefaults($.datepicker.regional.nb);$(".update-txt").keyup(function(){update($(this))});$.ajax({url:"/Personal/GetStillinger",type:"GET",success:function(n){$.ajax({url:"/Personal/GetValgtStilling",type:"GET",success:function(t){var i="",r=!1;$.each(n,function(n,u){var e=u.Element,f=u.ListeKatalogId;t==f?(r=!0,i+='<option selected id="stilling-'+f+'">'+e+"<\/option>"):i+='<option id="stilling-'+f+'">'+e+"<\/option>"});r||(i+='<option id="ingen-stilling" selected>Stilling ikke valgt<\/option>');$("#stillinger-select").html(i);$("#stillinger-select").removeAttr("disabled")}})}});$.ajax({url:"/Personal/GetNasjonaliteter",type:"GET",success:function(n){$.ajax({url:"/Personal/GetValgtNasjonalitet",type:"GET",success:function(t){var i="",r=!1;$.each(n,function(n,u){var e=u.Element,f=u.ListeKatalogId;t==f?(r=!0,i+='<option selected id="nasjonalitet-'+f+'">'+e+"<\/option>"):i+='<option id="nasjonalitet-'+f+'">'+e+"<\/option>"});r||(i+='<option id="ingen-nasjonalitet" selected>Nasjonalitet ikke valgt<\/option>');$("#nasjonalitet-select").html(i);$("#nasjonalitet-select").removeAttr("disabled")}})}});$("#stillinger-select").on("change",function(){var n=$("option:selected",this).attr("id"),t=n.substring(n.indexOf("-")+1,n.length);console.log(t);$.post("/Personal/Update",{Update:"Stilling",Value:t})});$("#nasjonalitet-select").on("change",function(){var n=$("option:selected",this).attr("id"),t=n.substring(n.indexOf("-")+1,n.length);console.log(t);$.post("/Personal/Update",{Update:"Nasjonalitet",Value:t})});$("#birthday-date, #geomatikk-start-date").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"d MM yy"});$.get("/Personal/GetBursdag",function(n){var t=createDate(n);console.log("Bursdag: "+t);$("#birthday-date").datepicker("setDate",t)},"json");$("#birthday-date").on("change",function(){var n=$(this).val();console.log(n);$.post("/Personal/UpdateBirthdate",{Value:n})});$.get("/Personal/GetStartDato",function(n){var t=createDate(n);console.log("Start Dato: "+t);$("#geomatikk-start-date").datepicker("setDate",t)},"json");$("#geomatikk-start-date").on("change",function(){var n=$(this).val();console.log(n);$.post("/Personal/UpdateStartDato",{Value:n})});var autoTextfield,userAutoInput,databaseUpdateColumn;$(".add-item-btn").click(function(){addItem($(this))});$(".add-item-auto").keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&addItem($(this))});$("body").on("click",".added-btn",function(){databaseUpdateColumn=$(this).parent().attr("id");databaseUpdateColumn=databaseUpdateColumn.substring(0,databaseUpdateColumn.indexOf("-"));$(this).remove();updateDatabase()});
//# sourceMappingURL=personal.min.js.map
