function update(n,t){$("#shadowBrukerLink").html("Surfer som "+$("#Fornavn-txt").val()+" "+$("#Etternavn-txt").val());$.ajax({url:"/Personal/Update",data:{Update:n,Value:t},type:"POST",beforeSend:function(){$("#"+n+"-label").removeClass("hidden")},success:function(){console.log("Lagt til");$("#"+n+"-label").addClass("hidden")}})}function getLanguages(){var n="Språk";$.ajax({url:"/Personal/GetLanguages",data:{Katalog:n},type:"GET",dataType:"json",success:function(t){var i=[],r=[];$.each(t[1],function(u,f){i.push(f.Element);r.push(f.ListeKatalogId);$("#"+n+"-alle-tabell tbody").append('<tr id="'+f.ListeKatalogId+'"><td class="col-lg-5">'+f.Element+'<\/td><td class="col-lg-1"><i class="fa fa-plus-square add-item-btn"><\/i><\/td><\/tr>');try{$.each(t[0][0].split(";"),function(t,i){if(f.ListeKatalogId==i){var r=n+"-"+f.ListeKatalogId;$("#"+n+"-bruker-tabell tbody").append('<tr id="'+r+'"><td class="col-lg-5">'+f.Element+'<\/td><td class="col-lg-1"><i class="fa fa-minus-square remove-item-btn"><\/i><\/td><\/tr>')}})}catch(e){console.log(e)}});$("#"+n+"-load").addClass("hidden");$("#"+n+"-form").removeClass("hidden");$("#"+n+"-alle-tabell").data("elementer",i);$("#"+n+"-alle-tabell").data("elementerId",r)}})}function getStillinger(){$.ajax({url:"/Personal/GetStillinger",type:"GET",success:function(n){$.ajax({url:"/Personal/GetValgtStilling",type:"GET",success:function(t){var i="",r=!1;$.each(n,function(n,u){var e=u.Element,f=u.ListeKatalogId;t==f?(r=!0,i+='<option selected id="stilling-'+f+'">'+e+"<\/option>"):i+='<option id="stilling-'+f+'">'+e+"<\/option>"});r||(i+='<option id="ingen-stilling" selected>Stilling ikke valgt<\/option>');$("#stillinger-select").html(i);$("#stillinger-select").removeAttr("disabled")}})}})}function GetNasjonaliteter(){$.ajax({url:"/Personal/GetNasjonaliteter",type:"GET",success:function(n){$.ajax({url:"/Personal/GetValgtNasjonalitet",type:"GET",success:function(t){var i="",r=!1;$.each(n,function(n,u){var e=u.Element,f=u.ListeKatalogId;t==f?(r=!0,i+='<option selected id="nasjonalitet-'+f+'">'+e+"<\/option>"):i+='<option id="nasjonalitet-'+f+'">'+e+"<\/option>"});r||(i+='<option id="ingen-nasjonalitet" selected>Nasjonalitet ikke valgt<\/option>');$("#nasjonalitet-select").html(i);$("#nasjonalitet-select").removeAttr("disabled")}})}})}function createDate(n){var t=n.split(" ")[0].split(".")[0],i=n.split(" ")[0].split(".")[1]-1,r=n.split(" ")[0].split(".")[2];return new Date(r,i,t)}function finnDbKolonne(n){dbOppdateringsKolonne=n.closest("table").attr("id");dbOppdateringsKolonne=dbOppdateringsKolonne.substring(0,dbOppdateringsKolonne.indexOf("-"));console.log("Katalog: "+dbOppdateringsKolonne)}function addItem(n){var t,i,r;isDuplicate()||(t=n.closest("td").prev().html(),console.log("Legg til: "+t),i=n.closest("table").data("elementer"),r=n.closest("table").data("elementerId"),$.each(i,function(n,i){t==i&&$("#"+dbOppdateringsKolonne+"-bruker-tabell tbody").append('<tr id="'+r[n]+'"><td class="col-lg-5">'+i+'<\/td><td class="col-lg-1"><i class="fa fa-minus-square remove-item-btn"><\/i><\/td><\/tr>')}),updateDatabase());$("#"+dbOppdateringsKolonne+"-auto").val("")}function updateDatabase(){var n="";$("#"+dbOppdateringsKolonne+"-bruker-tabell tbody tr").each(function(){var t=$(this).attr("id"),i=t.substring(t.indexOf("-")+1);n+=i+";"});n=n.substring(0,n.length-1);console.log("Table: "+dbOppdateringsKolonne);console.log("Value: "+n);$.post("/Personal/Update",{Update:dbOppdateringsKolonne,Value:n})}function isDuplicate(){return!1}var dbOppdateringsKolonne;$(document).ready(function(){getLanguages();getStillinger();GetNasjonaliteter()});$.datepicker.setDefaults($.datepicker.regional.nb);$(".update-txt").keyup(function(){var n=$(this).attr("id").substring(0,$(this).attr("id").indexOf("-")),t=$(this).val();update(n,t)});$(".table-filter").keyup(function(){var t=$(this).val(),n;console.log("Filter: "+t);n=$(this).attr("id").replace("-filter","");console.log("Katalog: "+n);$("#"+n+"-alle-tabell tbody tr").each(function(){var n=$(this).children("td").html();n.toLowerCase().indexOf(t.toLowerCase())>=0?$(this).removeClass("hidden"):$(this).addClass("hidden")})});$("#stillinger-select").on("change",function(){var n=$("option:selected",this).attr("id"),t=n.substring(n.indexOf("-")+1,n.length);console.log(t);update("Stilling",t)});$("#nasjonalitet-select").on("change",function(){var n=$("option:selected",this).attr("id"),t=n.substring(n.indexOf("-")+1,n.length);console.log(t);update("Nasjonalitet",t)});$("#birthday-date, #geomatikk-start-date").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"d MM yy"});$.get("/Personal/GetBursdag",function(n){var t=createDate(n);console.log("Bursdag: "+t);$("#birthday-date").datepicker("setDate",t)},"json");$("#birthday-date").on("change",function(){var n=$(this).val();console.log(n);update("Fødselsår",n)});$.get("/Personal/GetStartDato",function(n){var t=createDate(n);console.log("Start Dato: "+t);$("#geomatikk-start-date").datepicker("setDate",t)},"json");$("#geomatikk-start-date").on("change",function(){var n=$(this).val();console.log(n);update("StartDato",n)});$("body").on("click",".add-item-btn",function(){finnDbKolonne($(this));addItem($(this))});$("body").on("click",".remove-item-btn",function(){finnDbKolonne($(this));$(this).closest("tr").remove();updateDatabase()});
//# sourceMappingURL=personal.min.js.map
