function getKatalog(n){$.ajax({url:"/Expertise/GetElements",data:{Katalog:n},type:"GET",dataType:"json",success:function(t){console.log(t);var i=[],r=[];$.each(t[1],function(u,f){i.push(f.Element);r.push(f.ListeKatalogId);$.each(t[0][0].split(";"),function(t,i){f.ListeKatalogId==i&&$("#"+n+"-group").append('<button id="'+n+"-"+f.ListeKatalogId+'" type="button" class="btn btn-info added-btn" tabindex="-1">'+f.Element+"<\/button>")})});$(function(){$("#"+n+"-auto").typeahead({minLength:0,source:i})});$("#"+n+"-load").addClass("hidden");$("#"+n+"-form").removeClass("hidden");$("#"+n+"-auto").data("element",i);$("#"+n+"-auto").data("elementId",r)}})}function addItem(n){databaseUpdateColumn=n.attr("id");databaseUpdateColumn=databaseUpdateColumn.substring(0,databaseUpdateColumn.indexOf("-"));isDuplicate()&&(autoTextfield=$("#"+databaseUpdateColumn+"-auto"),appendNewElement(autoTextfield.val()),updateDatabase());$("#"+databaseUpdateColumn+"-auto").val("")}function appendNewElement(n){var t=autoTextfield.data("element"),i=autoTextfield.data("elementId");$.each(t,function(t,r){n==r&&$("#"+databaseUpdateColumn+"-group").append('<button id="'+databaseUpdateColumn+"-"+i[t]+'" type="button" class="btn btn-info added-btn" tabindex="-1">'+r+"<\/button>")})}function updateDatabase(){var n="";$("#"+databaseUpdateColumn+"-group button").each(function(){var t=$(this).attr("id"),i=t.substring(t.indexOf("-")+1);n+=i+";"});n=n.substring(0,n.length-1);console.log("Table: "+databaseUpdateColumn);console.log("Value: "+n);$.post("/Expertise/Update",{Update:databaseUpdateColumn,Value:n})}function isDuplicate(){var n=!1,t="",i="";$("#"+databaseUpdateColumn+"-group button").each(function(){var n=$(this).attr("id"),i=n.substring(n.indexOf("-")+1);t+=i+";"});autoTextfield=$("#"+databaseUpdateColumn+"-auto");var r=autoTextfield.val(),u=autoTextfield.data("element"),f=autoTextfield.data("elementId");return $.each(u,function(n,t){r==t&&(i=f[n])}),t.indexOf(i)==-1&&(n=!0),n}$(document).ready(function(){$.each(["Programmeringsspråk","Rammeverk","WebTeknologier","Databasesystemer","Serverside","Operativsystemer","Annet"],function(n,t){getKatalog(t)})});var autoTextfield,userAutoInput,databaseUpdateColumn;$(".add-item-btn").click(function(){addItem($(this))});$(".add-item-auto").keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&(addItem($(this)),$(this).blur())});$("body").on("click",".added-btn",function(){databaseUpdateColumn=$(this).parent().attr("id");databaseUpdateColumn=databaseUpdateColumn.substring(0,databaseUpdateColumn.indexOf("-"));$(this).remove();updateDatabase()});
//# sourceMappingURL=expertise.min.js.map
