function refreshTable(){$("table").addClass("hidden");$("#elem-load").removeClass("hidden");$.ajax({url:"/Education/GetUtdannelse",type:"GET",success:function(n){console.log(n);var t="";$.each(n,function(n,i){var r=i.UtdannelseId,u=i.Studiested,f=i.Beskrivelse,e=i.Fra,o=i.Til;t+='<tr id="'+r+'"><td class="update-td col-lg-3">'+u+'<\/td><td class="update-td col-lg-5">'+f+'<\/td><td class="update-td col-lg-1">'+e+'<\/td><td class="update-td col-lg-1">'+o+'<\/td><td><a class="del-link col-lg-2">Slett<\/a><\/td><\/tr>'});t==""?$('#Utdannelse-tabs a[href="#new-education-tab"]').tab("show"):($("tbody").html(t),$("#elem-load").addClass("hidden"),$("table").removeClass("hidden"))}})}function changeElement(){var t=$("#editModal").data("elementId"),i=$("#editModal").data("dbKolonne"),n="",r;n=i=="Fra"||i=="Til"?$("#modal-select").val():$("#edit-txt").val();r=$("#"+t);console.log("Ny tekst: "+n+"("+t+")");$.ajax({url:"/Education/ChangeElement",data:{Id:t,NewValue:n,Kolonne:i},type:"POST",beforeSend:function(){$("#edit-txt").addClass("hidden");$("#modal-select").addClass("hidden");$("#editLoader").removeClass("hidden")},success:function(){console.log("Changed");var i=$("#editModal").data("tdIndex"),t=r.children("td:nth-child("+(i+1)+")");t.html(n);t.updateSortVal(n);$("#editModal").modal("hide")}})}$(document).ready(function(){$("#education-table").stupidtable();$("#education-table").bind("aftertablesort",function(n,t){var i=t.column,r=t.direction;$.each($("#education-table th i"),function(n){console.log(n);n==i?($(this).removeClass("hidden"),$(this).removeClass("fa-sort-desc"),$(this).removeClass("fa-sort-asc"),r=="asc"?$(this).addClass("fa-sort-asc"):$(this).addClass("fa-sort-desc")):$(this).addClass("hidden")})});refreshTable()});$("#education-add-btn").click(function(){var n=$("#school-text").val(),t=$("#education-text").val(),i=$("#education-select-from").val(),r=$("#education-select-to").val();$.ajax({url:"/Education/AddNewEducation",data:{Skole:n,Beskrivelse:t,Fra:i,Til:r},type:"POST",beforeSend:function(){$("#education-add-btn").html('Legger til utdanning <i class="fa fa-spinner fa-spin"><\/i>')},success:function(){$("#school-text").val("");$("#education-text").val("");$("#education-select-from").val($("#education-select-from option:first").val());$("#education-select-to").val($("#education-select-to option:first").val());$("#education-add-btn").html("Legg til ny utdannelse");refreshTable()}})});$(document).on("click",".del-link",function(){console.log("Deleting..");var n=$(this).closest("tr").attr("id"),t=$(this).closest("tr"),i=$(this).closest("td");i.html('Sletter <i class="fa fa-spinner fa-spin"><\/i>');console.log("Id: "+n);$.ajax({url:"/Education/DeleteElement",data:{Id:n},type:"POST",success:function(){console.log("Success");t.remove()}})});$("#editModal").on("shown.bs.modal",function(){$("#edit-txt").focus()});$(document).on("click",".update-td",function(){var t=$(this),r=t.index(),e=t.closest("tr"),u=e.attr("id"),i=t.html(),f=$("#education-table").find("th").eq(r).html(),n=f.substring(0,f.indexOf("<"));console.log(u+" - "+i+" - "+n);$("#myModalLabel").html("Rediger "+n.toLowerCase());$("#editModal").data("elementId",u);$("#editModal").data("dbKolonne",n);$("#editModal").data("tdIndex",r);n=="Fra"||n=="Til"?($("#edit-txt").addClass("hidden"),$("#modal-select").removeClass("hidden"),$("#modal-select").val(i)):($("#modal-select").addClass("hidden"),$("#edit-txt").removeClass("hidden"),$("#edit-txt").val(i));$("#editLoader").addClass("hidden");$("#editModal").modal()});$(document).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&$("#editModal").is(":visible")&&changeElement()});$("#editmodalAddItem").click(function(){changeElement()});
//# sourceMappingURL=education.min.js.map
